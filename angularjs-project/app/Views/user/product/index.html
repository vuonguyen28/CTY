<div ng-controller="bookController" class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <button class="btn btn-primary" ng-click="goToAddProduct()">Thêm sách</button>
        </div>
    </div>
    <!-- Bộ lọc -->
    <div class="row align-items-center mb-3">
        <div class="col-md-6">
            <label for="sort" class="form-label fw-bold">Sắp xếp</label>
            <select id="sort" ng-model="sortColumn" class="form-select">
                <option value="title">Tên A → Z</option>
                <option value="-title">Tên Z → A</option>
                <option value="price">Giá thấp → cao</option>
                <option value="-price">Giá cao → thấp</option>
                <option value="publishers">Nhà xuất bản A → Z</option>
                <option value="-publishers">Nhà xuất bản Z → A</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="search" class="form-label fw-bold">Tìm kiếm</label>
            <div class="input-group">
                <input ng-model="searchText" type="search" id="search" class="form-control" placeholder="Nhập tên sách..." required />
                <button type="submit" class="btn btn-dark" style="color: rgb(160, 157, 0);">Tìm</button>
            </div>
        </div>
    </div>

    <!-- Bảng danh sách sách -->
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-dark text-light">
                <tr>
                    <th>#</th>
                    <!-- <th>Hình ảnh</th> -->
                    <th>Tên sách</th>
                    <th>Giá</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="book in books | orderBy:sortColumn | filter:searchText">
                    <td>{{$index + 1}}</td>
                    <!-- <td>
                        <img ng-src="{{book.image_url}}" alt="{{book.title}}" class="img-thumbnail rounded shadow-sm" style="width: 80px; height: 100px;">
                    </td> -->
                    <td class="text-uppercase fw-semibold">{{ book.title }}</td>
                    <td class="text-danger fw-bold">{{ book.price | currency : '':0 }} VND</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#bookModal" ng-click="getBookByID(book.id)">
                            <i class="fa-solid fa-eye"></i> Xem chi tiết
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Modal Chi Tiết Sách -->
    <div class="modal fade" id="bookModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Chi tiết sách</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img ng-src="{{book.image_url}}" class="img-fluid rounded shadow-sm mb-3" alt="{{book.title}}" style="max-width: 300px; margin: 0 auto;">
                    <p><b>Tên sách:</b> {{ book.title }}</p>
                    <p ng-repeat="author in book.authors"><b>Tác giả:</b> {{ author.name }}{{$last ? '' : ', '}}</p>
                    <p><b>Giá:</b> <span class="text-danger fw-bold">{{ book.price | currency:'VND ' }}</span></p>
                    <p><b>Mô tả:</b> {{ book.description }}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="color: rgb(160, 157, 0);">Đóng</button>
                </div>
            </div>
        </div>
    </div>
</div>
